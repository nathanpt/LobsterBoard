/*!
 * LobsterBoard v0.2.1
 * Dashboard builder with customizable widgets
 * https://github.com/curbob/LobsterBoard
 * @license MIT
 */
const e={weather:{name:"Local Weather",icon:"üå°Ô∏è",category:"small",description:"Shows current weather for a single location using wttr.in (no API key needed).",defaultWidth:200,defaultHeight:120,hasApiKey:!1,properties:{title:"Local Weather",location:"Atlanta",units:"F",refreshInterval:600},preview:'<div style="text-align:center;padding:8px;">\n      <div style="font-size:24px;">72¬∞F</div>\n      <div style="font-size:11px;color:#8b949e;">Atlanta</div>\n    </div>',generateHtml:e=>`\n      <div class="dash-card" id="widget-${e.id}" style="height:100%;">\n        <div class="dash-card-head">\n          <span class="dash-card-title">üå°Ô∏è ${e.title||"Local Weather"}</span>\n        </div>\n        <div class="dash-card-body" style="display:flex;align-items:center;justify-content:center;gap:10px;">\n          <span id="${e.id}-icon" style="font-size:24px;">üå°Ô∏è</span>\n          <div>\n            <div class="kpi-value blue" id="${e.id}-value">‚Äî</div>\n            <div class="kpi-label" id="${e.id}-label">${e.location||"Location"}</div>\n          </div>\n        </div>\n      </div>`,generateJs:e=>`\n      // Weather Widget: ${e.id} (uses free wttr.in API - no key needed)\n      async function update_${e.id.replace(/-/g,"_")}() {\n        try {\n          const location = encodeURIComponent('${e.location||"Atlanta"}');\n          const res = await fetch('https://wttr.in/' + location + '?format=j1');\n          const data = await res.json();\n          const current = data.current_condition[0];\n          const temp = '${e.units}' === 'C' ? current.temp_C : current.temp_F;\n          const unit = '${e.units}' === 'C' ? '¬∞C' : '¬∞F';\n          document.getElementById('${e.id}-value').textContent = temp + unit;\n          document.getElementById('${e.id}-label').textContent = current.weatherDesc[0].value;\n          const code = parseInt(current.weatherCode);\n          let icon = 'üå°Ô∏è';\n          if (code === 113) icon = '‚òÄÔ∏è';\n          else if (code === 116 || code === 119) icon = '‚õÖ';\n          else if (code >= 176 && code <= 359) icon = 'üåßÔ∏è';\n          else if (code >= 368 && code <= 395) icon = '‚ùÑÔ∏è';\n          document.getElementById('${e.id}-icon').textContent = icon;\n        } catch (e) {\n          console.error('Weather widget error:', e);\n          document.getElementById('${e.id}-value').textContent = '‚Äî';\n        }\n      }\n      update_${e.id.replace(/-/g,"_")}();\n      setInterval(update_${e.id.replace(/-/g,"_")}, ${1e3*(e.refreshInterval||600)});\n    `},clock:{name:"Clock",icon:"üïê",category:"small",description:"Simple digital clock. Supports 12h or 24h format.",defaultWidth:200,defaultHeight:120,hasApiKey:!1,properties:{title:"Clock",timezone:"local",format24h:!1},preview:'<div style="text-align:center;padding:8px;">\n      <div style="font-size:24px;">3:45 PM</div>\n      <div style="font-size:11px;color:#8b949e;">Wed, Feb 5</div>\n    </div>',generateHtml:e=>`\n      <div class="dash-card" id="widget-${e.id}" style="height:100%;">\n        <div class="dash-card-head">\n          <span class="dash-card-title">üïê ${e.title||"Clock"}</span>\n        </div>\n        <div class="dash-card-body" style="display:flex;flex-direction:column;align-items:center;justify-content:center;">\n          <div class="kpi-value" id="${e.id}-time">‚Äî</div>\n          <div class="kpi-label" id="${e.id}-date">‚Äî</div>\n        </div>\n      </div>`,generateJs:e=>`\n      // Clock Widget: ${e.id}\n      function updateClock_${e.id.replace(/-/g,"_")}() {\n        const now = new Date();\n        const timeEl = document.getElementById('${e.id}-time');\n        const dateEl = document.getElementById('${e.id}-date');\n        const opts = { hour: 'numeric', minute: '2-digit', hour12: ${!e.format24h} };\n        timeEl.textContent = now.toLocaleTimeString('en-US', opts);\n        dateEl.textContent = now.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });\n      }\n      updateClock_${e.id.replace(/-/g,"_")}();\n      setInterval(updateClock_${e.id.replace(/-/g,"_")}, 1000);\n    `},"auth-status":{name:"Auth Status",icon:"üîê",category:"small",description:"Shows if OpenClaw is using Anthropic Max subscription (green) or API key fallback (yellow).",defaultWidth:180,defaultHeight:100,hasApiKey:!0,apiKeyName:"OPENCLAW_API",properties:{title:"Auth Type",endpoint:"/api/status",refreshInterval:30},preview:'<div style="text-align:center;padding:8px;">\n      <div style="width:10px;height:10px;background:#3fb950;border-radius:50%;margin:0 auto 4px;"></div>\n      <div style="font-size:13px;">OAuth</div>\n      <div style="font-size:11px;color:#8b949e;">Auth</div>\n    </div>',generateHtml:e=>`\n      <div class="dash-card" id="widget-${e.id}" style="height:100%;">\n        <div class="dash-card-head">\n          <span class="dash-card-title">üîê ${e.title||"Auth Type"}</span>\n        </div>\n        <div class="dash-card-body" style="display:flex;align-items:center;justify-content:center;gap:10px;">\n          <div class="kpi-indicator" id="${e.id}-dot"></div>\n          <div class="kpi-value" id="${e.id}-value">‚Äî</div>\n        </div>\n      </div>`,generateJs:e=>`\n      // Auth Status Widget: ${e.id}\n      async function update_${e.id.replace(/-/g,"_")}() {\n        try {\n          const res = await fetch('${e.endpoint||"/api/status"}');\n          const json = await res.json();\n          const data = json.data || json;\n          const dot = document.getElementById('${e.id}-dot');\n          const val = document.getElementById('${e.id}-value');\n          val.textContent = data.authMode === 'oauth' ? 'Subscription' : 'API';\n          dot.className = 'kpi-indicator ' + (data.authMode === 'oauth' ? 'green' : 'yellow');\n        } catch (e) {\n          console.error('Auth status widget error:', e);\n          document.getElementById('${e.id}-value').textContent = '‚Äî';\n        }\n      }\n      update_${e.id.replace(/-/g,"_")}();\n      setInterval(update_${e.id.replace(/-/g,"_")}, ${1e3*(e.refreshInterval||30)});\n    `},"session-count":{name:"Active Sessions",icon:"üí¨",category:"small",description:"Shows count of active OpenClaw sessions.",defaultWidth:160,defaultHeight:100,hasApiKey:!0,apiKeyName:"OPENCLAW_API",properties:{title:"Sessions",endpoint:"/api/sessions",refreshInterval:30},preview:'<div style="text-align:center;padding:8px;">\n      <div style="font-size:28px;color:#58a6ff;">3</div>\n      <div style="font-size:11px;color:#8b949e;">Active</div>\n    </div>',generateHtml:e=>`\n      <div class="kpi-card kpi-sm" id="widget-${e.id}">\n        <div class="kpi-icon">üí¨</div>\n        <div class="kpi-data">\n          <div class="kpi-value blue" id="${e.id}-count">‚Äî</div>\n          <div class="kpi-label">Active</div>\n        </div>\n      </div>`,generateJs:e=>`\n      // Session Count Widget: ${e.id}\n      async function update_${e.id.replace(/-/g,"_")}() {\n        try {\n          const res = await fetch('${e.endpoint||"/api/sessions"}');\n          const json = await res.json();\n          const data = json.data || json;\n          document.getElementById('${e.id}-count').textContent = data.active || data.length || 0;\n        } catch (e) {\n          document.getElementById('${e.id}-count').textContent = '‚Äî';\n        }\n      }\n      update_${e.id.replace(/-/g,"_")}();\n      setInterval(update_${e.id.replace(/-/g,"_")}, ${1e3*(e.refreshInterval||30)});\n    `},"activity-list":{name:"Activity List",icon:"üìã",category:"large",description:"Shows recent OpenClaw activity from /api/activity endpoint.",defaultWidth:400,defaultHeight:300,hasApiKey:!0,apiKeyName:"OPENCLAW_API",properties:{title:"Today",endpoint:"/api/activity",maxItems:10,refreshInterval:60},preview:'<div style="padding:4px;font-size:11px;color:#8b949e;">\n      <div>‚Ä¢ Meeting at 2pm</div>\n      <div>‚Ä¢ Review PR #42</div>\n      <div>‚Ä¢ Deploy v1.2</div>\n    </div>',generateHtml:e=>`\n      <div class="dash-card" id="widget-${e.id}" style="height:100%;">\n        <div class="dash-card-head">\n          <span class="dash-card-title">üìã ${e.title||"Today"}</span>\n          <span class="dash-card-badge" id="${e.id}-badge">‚Äî</span>\n        </div>\n        <div class="dash-card-body compact-list" id="${e.id}-list">\n          <div class="list-item">‚Ä¢ Team standup at 10am</div>\n          <div class="list-item">‚Ä¢ Review PR #42</div>\n        </div>\n      </div>`,generateJs:e=>`\n      // Activity List Widget: ${e.id}\n      async function update_${e.id.replace(/-/g,"_")}() {\n        try {\n          const res = await fetch('${e.endpoint||"/api/activity"}');\n          const json = await res.json();\n          const data = json.data || json;\n          const list = document.getElementById('${e.id}-list');\n          const badge = document.getElementById('${e.id}-badge');\n          const items = data.items || [];\n          list.innerHTML = items.slice(0, ${e.maxItems||10}).map(item => \n            '<div class="list-item">' + item.text + '</div>'\n          ).join('');\n          badge.textContent = items.length + ' items';\n        } catch (e) {\n          console.error('Activity list widget error:', e);\n          document.getElementById('${e.id}-list').innerHTML = '<div class="list-item">‚Äî</div>';\n        }\n      }\n      update_${e.id.replace(/-/g,"_")}();\n      setInterval(update_${e.id.replace(/-/g,"_")}, ${1e3*(e.refreshInterval||60)});\n    `},"cron-jobs":{name:"Cron Jobs",icon:"‚è∞",category:"large",description:"Lists scheduled cron jobs from OpenClaw /api/cron endpoint.",defaultWidth:400,defaultHeight:250,hasApiKey:!0,apiKeyName:"OPENCLAW_API",properties:{title:"Cron",endpoint:"/api/cron",refreshInterval:30},preview:'<div style="padding:4px;font-size:11px;color:#8b949e;">\n      <div>‚è∞ Daily backup - 2am</div>\n      <div>‚è∞ Sync data - */5 *</div>\n    </div>',generateHtml:e=>`\n      <div class="dash-card" id="widget-${e.id}" style="height:100%;">\n        <div class="dash-card-head">\n          <span class="dash-card-title">‚è∞ ${e.title||"Cron"}</span>\n          <span class="dash-card-badge" id="${e.id}-badge">‚Äî</span>\n        </div>\n        <div class="dash-card-body" id="${e.id}-list">\n          <div class="cron-item"><span class="cron-name">Daily backup</span><span class="cron-next">2:00 AM</span></div>\n        </div>\n      </div>`,generateJs:e=>`\n      // Cron Jobs Widget: ${e.id}\n      async function update_${e.id.replace(/-/g,"_")}() {\n        try {\n          const res = await fetch('${e.endpoint||"/api/cron"}');\n          const json = await res.json();\n          const data = json.data || json;\n          const list = document.getElementById('${e.id}-list');\n          const badge = document.getElementById('${e.id}-badge');\n          const jobs = data.jobs || [];\n          list.innerHTML = jobs.map(job => \n            '<div class="cron-item"><span class="cron-name">' + job.name + '</span><span class="cron-next">' + job.next + '</span></div>'\n          ).join('');\n          badge.textContent = jobs.length + ' jobs';\n        } catch (e) {\n          console.error('Cron jobs widget error:', e);\n          document.getElementById('${e.id}-list').innerHTML = '<div class="cron-item"><span class="cron-name">‚Äî</span></div>';\n        }\n      }\n      update_${e.id.replace(/-/g,"_")}();\n      setInterval(update_${e.id.replace(/-/g,"_")}, ${1e3*(e.refreshInterval||30)});\n    `},"system-log":{name:"System Log",icon:"üîß",category:"large",description:"Shows recent system logs from OpenClaw /api/logs endpoint.",defaultWidth:500,defaultHeight:400,hasApiKey:!0,apiKeyName:"OPENCLAW_API",properties:{title:"System Log",endpoint:"/api/logs",maxLines:50,refreshInterval:10},preview:'<div style="padding:4px;font-size:10px;font-family:monospace;color:#8b949e;">\n      <div>[INFO] System started</div>\n      <div>[DEBUG] Loading config</div>\n    </div>',generateHtml:e=>`\n      <div class="dash-card" id="widget-${e.id}" style="height:100%;">\n        <div class="dash-card-head">\n          <span class="dash-card-title">üîß ${e.title||"System Log"}</span>\n          <span class="dash-card-badge" id="${e.id}-badge">‚Äî</span>\n        </div>\n        <div class="dash-card-body compact-list syslog-scroll" id="${e.id}-log">\n          <div class="log-line">[INFO] System started successfully</div>\n        </div>\n      </div>`,generateJs:e=>`\n      // System Log Widget: ${e.id}\n      async function update_${e.id.replace(/-/g,"_")}() {\n        try {\n          const res = await fetch('${e.endpoint||"/api/logs"}');\n          const json = await res.json();\n          const data = json.data || json;\n          const log = document.getElementById('${e.id}-log');\n          const badge = document.getElementById('${e.id}-badge');\n          const lines = data.lines || [];\n          log.innerHTML = lines.slice(-${e.maxLines||50}).map(line => \n            '<div class="log-line">' + line + '</div>'\n          ).join('');\n          badge.textContent = lines.length + ' lines';\n          log.scrollTop = log.scrollHeight;\n        } catch (e) {\n          console.error('System log widget error:', e);\n          document.getElementById('${e.id}-log').innerHTML = '<div class="log-line">‚Äî</div>';\n        }\n      }\n      update_${e.id.replace(/-/g,"_")}();\n      setInterval(update_${e.id.replace(/-/g,"_")}, ${1e3*(e.refreshInterval||10)});\n    `},"pages-menu":{name:"Pages Menu",icon:"üìë",category:"small",description:"Navigation links to all discovered LobsterBoard pages. Supports vertical or horizontal layout.",defaultWidth:220,defaultHeight:200,hasApiKey:!1,properties:{title:"Pages",layout:"vertical",refreshInterval:60},preview:'<div style="padding:6px;font-size:11px;color:#8b949e;">\n      <div>üìù Notes</div>\n      <div>üìã Board</div>\n      <div>üìÖ Calendar</div>\n    </div>',generateHtml:e=>`\n      <div class="dash-card" id="widget-${e.id}" style="height:100%;">\n        <div class="dash-card-head">\n          <span class="dash-card-title">üìë ${e.title||"Pages"}</span>\n        </div>\n        <div class="dash-card-body pages-menu ${"horizontal"===e.layout?"pages-menu-horizontal":"pages-menu-vertical"}" id="${e.id}-list">\n          <span class="pages-menu-item">Loading‚Ä¶</span>\n        </div>\n      </div>\n      <style>\n        .pages-menu-vertical { display:flex; flex-direction:column; gap:4px; overflow-y:auto; }\n        .pages-menu-horizontal { display:flex; flex-direction:row; flex-wrap:wrap; gap:6px; align-items:center; }\n        .pages-menu-item {\n          display:inline-flex; align-items:center; gap:6px;\n          padding:6px 10px; border-radius:6px;\n          background:#21262d; color:#c9d1d9;\n          text-decoration:none; font-size:13px;\n          transition: background .15s, color .15s;\n        }\n        .pages-menu-item:hover { background:#30363d; color:#58a6ff; }\n        .pages-menu-item .pages-menu-icon { font-size:15px; }\n      </style>`,generateJs:e=>`\n      // Pages Menu Widget: ${e.id}\n      async function update_${e.id.replace(/-/g,"_")}() {\n        try {\n          const res = await fetch('/api/pages');\n          const pages = await res.json();\n          const list = document.getElementById('${e.id}-list');\n          if (!pages.length) { list.innerHTML = '<span class="pages-menu-item">No pages found</span>'; return; }\n          list.innerHTML = pages.map(p =>\n            '<a class="pages-menu-item" href="/pages/' + p.id + '" title="' + (p.description || p.title || p.name || '') + '">' +\n            '<span class="pages-menu-icon">' + (p.icon || 'üìÑ') + '</span>' +\n            '<span>' + (p.title || p.name || p.id) + '</span></a>'\n          ).join('');\n        } catch (e) {\n          console.error('Pages menu widget error:', e);\n          document.getElementById('${e.id}-list').innerHTML = '<span class="pages-menu-item">Error loading pages</span>';\n        }\n      }\n      update_${e.id.replace(/-/g,"_")}();\n      setInterval(update_${e.id.replace(/-/g,"_")}, ${1e3*(e.refreshInterval||60)});\n    `},topbar:{name:"Top Nav Bar",icon:"üîù",category:"bar",description:"Navigation bar with clock, weather, and system stats.",defaultWidth:1920,defaultHeight:48,hasApiKey:!1,properties:{title:"OpenClaw",links:"Dashboard,Activity,Settings"},preview:'<div style="background:#161b22;padding:8px;font-size:11px;display:flex;gap:12px;">\n      <span>ü§ñ OpenClaw</span>\n      <span style="color:#58a6ff;">Dashboard</span>\n    </div>',generateHtml:e=>`\n      <nav class="topbar" id="widget-${e.id}">\n        <div class="topbar-left">\n          <span class="topbar-brand">ü§ñ ${e.title||"OpenClaw"}</span>\n          ${(e.links||"Dashboard").split(",").map((e,n)=>`<a href="#" class="topbar-link${0===n?" active":""}">${e.trim()}</a>`).join("")}\n        </div>\n        <div class="topbar-right">\n          <span class="topbar-meta" id="${e.id}-refresh">‚Äî</span>\n          <button class="topbar-refresh" onclick="location.reload()" title="Refresh">‚Üª</button>\n        </div>\n      </nav>`,generateJs:e=>`\n      // Top Bar Widget: ${e.id}\n      document.getElementById('${e.id}-refresh').textContent = \n        new Date().toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });\n    `}};function n(){const n={};for(const[t,i]of Object.entries(e)){const e=i.category||"other";n[e]||(n[e]=[]),n[e].push({key:t,...i})}return n}function t(n){return e[n]||null}function i(){return Object.keys(e)}function a(e){if(!e)return"";if("undefined"!=typeof document){const n=document.createElement("div");return n.textContent=e,n.innerHTML}return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function o(e,n){if(!1!==n)return e;return e.replace(/<div\s+class="dash-card-head"[^>]*>[\s\S]*?<\/div>/i,"")}function d(){return"/* LobsterBoard Dashboard - Generated Styles */\n\n:root {\n  --bg-primary: #0d1117;\n  --bg-secondary: #161b22;\n  --bg-tertiary: #21262d;\n  --bg-hover: #30363d;\n  --border: #30363d;\n  --text-primary: #e6edf3;\n  --text-secondary: #8b949e;\n  --text-muted: #6e7681;\n  --accent-blue: #58a6ff;\n  --accent-green: #3fb950;\n  --accent-orange: #d29922;\n  --accent-red: #f85149;\n  --accent-purple: #a371f7;\n}\n\n* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  min-height: 100vh;\n}\n\n.dashboard {\n  margin: 0 auto;\n  overflow: hidden;\n}\n\n.widget-container {\n  overflow: hidden;\n}\n\n/* KPI Cards */\n.kpi-card {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border);\n  border-radius: 8px;\n  padding: 16px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  height: 100%;\n}\n\n.kpi-sm {\n  padding: 12px;\n}\n\n.kpi-icon {\n  font-size: 24px;\n}\n\n.kpi-data {\n  flex: 1;\n}\n\n.kpi-value {\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.kpi-value.blue { color: var(--accent-blue); }\n.kpi-value.green { color: var(--accent-green); }\n.kpi-value.orange { color: var(--accent-orange); }\n.kpi-value.red { color: var(--accent-red); }\n\n.kpi-label {\n  font-size: 12px;\n  color: var(--text-secondary);\n  margin-top: 2px;\n}\n\n.kpi-indicator {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: var(--text-muted);\n}\n\n.kpi-indicator.green { background: var(--accent-green); }\n.kpi-indicator.yellow { background: var(--accent-orange); }\n.kpi-indicator.red { background: var(--accent-red); }\n\n/* Dash Cards */\n.dash-card {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border);\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: hidden;\n}\n\n.dash-card-head {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  border-bottom: 1px solid var(--border);\n  background: var(--bg-tertiary);\n}\n\n.dash-card-title {\n  font-size: 13px;\n  font-weight: 600;\n}\n\n.dash-card-badge {\n  font-size: 11px;\n  color: var(--text-secondary);\n  background: var(--bg-primary);\n  padding: 2px 8px;\n  border-radius: 10px;\n}\n\n.dash-card-body {\n  flex: 1;\n  padding: 12px 16px;\n  overflow-y: auto;\n}\n\n.compact-list {\n  font-size: 12px;\n}\n\n.syslog-scroll {\n  font-family: 'SF Mono', Monaco, monospace;\n  font-size: 11px;\n}\n\n/* Top Bar */\n.topbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 20px;\n  background: var(--bg-secondary);\n  border-bottom: 1px solid var(--border);\n  height: 100%;\n}\n\n.topbar-left {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.topbar-brand {\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.topbar-link {\n  color: var(--text-secondary);\n  text-decoration: none;\n  font-size: 13px;\n}\n\n.topbar-link:hover,\n.topbar-link.active {\n  color: var(--accent-blue);\n}\n\n.topbar-right {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.topbar-meta {\n  font-size: 12px;\n  color: var(--text-muted);\n}\n\n.topbar-refresh {\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border);\n  color: var(--text-secondary);\n  padding: 4px 8px;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n/* List Items */\n.list-item {\n  padding: 6px 0;\n  border-bottom: 1px solid var(--border);\n}\n\n.list-item:last-child {\n  border-bottom: none;\n}\n\n.cron-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 6px 0;\n  border-bottom: 1px solid var(--border);\n}\n\n.cron-name {\n  color: var(--text-primary);\n}\n\n.cron-next {\n  color: var(--text-muted);\n  font-size: 11px;\n}\n\n.log-line {\n  padding: 2px 0;\n  border-bottom: 1px solid rgba(48, 54, 61, 0.5);\n}\n\n/* Weather */\n.weather-row {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 8px 0;\n  border-bottom: 1px solid var(--border);\n}\n\n.weather-row:last-child {\n  border-bottom: none;\n}\n\n.weather-icon {\n  font-size: 18px;\n}\n\n.weather-loc {\n  flex: 1;\n  color: var(--text-primary);\n}\n\n.weather-temp {\n  font-weight: 600;\n  color: var(--accent-blue);\n}\n\n/* Utilities */\n.loading-sm {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n}\n\n.spinner-sm {\n  width: 20px;\n  height: 20px;\n  border: 2px solid var(--bg-tertiary);\n  border-top-color: var(--accent-blue);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.error {\n  color: var(--accent-red);\n  padding: 10px;\n  text-align: center;\n}\n\n::-webkit-scrollbar {\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  background: var(--bg-primary);\n}\n\n::-webkit-scrollbar-thumb {\n  background: var(--bg-tertiary);\n  border-radius: 3px;\n}\n\n/* Post-Export Edit Mode */\n.edit-mode .widget-container {\n  cursor: move;\n  outline: 2px dashed #3b82f6;\n  outline-offset: -2px;\n}\n\n.edit-mode .widget-container:hover {\n  outline-color: #60a5fa;\n}\n\n.edit-mode .widget-container.dragging {\n  opacity: 0.8;\n  z-index: 1000;\n}\n\n.resize-handle-edit {\n  display: none;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 16px;\n  height: 16px;\n  cursor: se-resize;\n  background: #3b82f6;\n  border-radius: 2px 0 0 0;\n  z-index: 10;\n}\n\n.edit-mode .resize-handle-edit {\n  display: block;\n}\n\n#edit-toggle {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  z-index: 9999;\n  padding: 8px 16px;\n  background: #1e293b;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 500;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n}\n\n#edit-toggle:hover {\n  background: #334155;\n}\n\n#edit-toggle.active {\n  background: #3b82f6;\n}\n"}function s(){return"\n// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n// POST-EXPORT LAYOUT EDITING\n// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n(function() {\n  const STORAGE_KEY = 'lobsterboard-layout';\n  const GRID_SIZE = 20;\n  const MIN_WIDTH = 100;\n  const MIN_HEIGHT = 60;\n  \n  let editMode = false;\n  let activeWidget = null;\n  let startX, startY, origLeft, origTop, origWidth, origHeight;\n  let isResizing = false;\n\n  document.addEventListener('DOMContentLoaded', initEditMode);\n\n  function initEditMode() {\n    const btn = document.createElement('button');\n    btn.id = 'edit-toggle';\n    btn.textContent = '‚úèÔ∏è Edit Layout';\n    btn.onclick = toggleEditMode;\n    document.body.appendChild(btn);\n    document.querySelectorAll('.widget-container').forEach(initWidget);\n    loadPositions();\n  }\n\n  function initWidget(widget) {\n    const handle = document.createElement('div');\n    handle.className = 'resize-handle-edit';\n    widget.appendChild(handle);\n    widget.addEventListener('mousedown', onWidgetMouseDown);\n    handle.addEventListener('mousedown', onResizeMouseDown);\n  }\n\n  function toggleEditMode() {\n    editMode = !editMode;\n    document.body.classList.toggle('edit-mode', editMode);\n    document.getElementById('edit-toggle').classList.toggle('active', editMode);\n    document.getElementById('edit-toggle').textContent = editMode ? 'üíæ Save Layout' : '‚úèÔ∏è Edit Layout';\n    if (!editMode) savePositions();\n  }\n\n  function onWidgetMouseDown(e) {\n    if (!editMode) return;\n    if (e.target.classList.contains('resize-handle-edit')) return;\n    if (e.button !== 0) return;\n    e.preventDefault();\n    activeWidget = e.currentTarget;\n    isResizing = false;\n    startX = e.clientX;\n    startY = e.clientY;\n    origLeft = activeWidget.offsetLeft;\n    origTop = activeWidget.offsetTop;\n    activeWidget.classList.add('dragging');\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  }\n\n  function onResizeMouseDown(e) {\n    if (!editMode) return;\n    e.preventDefault();\n    e.stopPropagation();\n    activeWidget = e.target.parentElement;\n    isResizing = true;\n    startX = e.clientX;\n    startY = e.clientY;\n    origWidth = activeWidget.offsetWidth;\n    origHeight = activeWidget.offsetHeight;\n    activeWidget.classList.add('dragging');\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  }\n\n  function onMouseMove(e) {\n    if (!activeWidget) return;\n    const dx = e.clientX - startX;\n    const dy = e.clientY - startY;\n    if (isResizing) {\n      activeWidget.style.width = Math.max(MIN_WIDTH, origWidth + dx) + 'px';\n      activeWidget.style.height = Math.max(MIN_HEIGHT, origHeight + dy) + 'px';\n    } else {\n      activeWidget.style.left = Math.max(0, origLeft + dx) + 'px';\n      activeWidget.style.top = Math.max(0, origTop + dy) + 'px';\n    }\n  }\n\n  function onMouseUp() {\n    if (!activeWidget) return;\n    if (isResizing) {\n      activeWidget.style.width = snapToGrid(activeWidget.offsetWidth) + 'px';\n      activeWidget.style.height = snapToGrid(activeWidget.offsetHeight) + 'px';\n    } else {\n      activeWidget.style.left = snapToGrid(activeWidget.offsetLeft) + 'px';\n      activeWidget.style.top = snapToGrid(activeWidget.offsetTop) + 'px';\n    }\n    activeWidget.classList.remove('dragging');\n    activeWidget = null;\n    isResizing = false;\n    document.removeEventListener('mousemove', onMouseMove);\n    document.removeEventListener('mouseup', onMouseUp);\n  }\n\n  function snapToGrid(value) {\n    return Math.round(value / GRID_SIZE) * GRID_SIZE;\n  }\n\n  function savePositions() {\n    const positions = {};\n    document.querySelectorAll('.widget-container').forEach(widget => {\n      const id = widget.dataset.widgetId;\n      if (id) {\n        positions[id] = {\n          left: widget.offsetLeft,\n          top: widget.offsetTop,\n          width: widget.offsetWidth,\n          height: widget.offsetHeight\n        };\n      }\n    });\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(positions));\n    } catch (e) {}\n  }\n\n  function loadPositions() {\n    try {\n      const saved = localStorage.getItem(STORAGE_KEY);\n      if (!saved) return;\n      const positions = JSON.parse(saved);\n      document.querySelectorAll('.widget-container').forEach(widget => {\n        const id = widget.dataset.widgetId;\n        const pos = positions[id];\n        if (pos) {\n          widget.style.left = pos.left + 'px';\n          widget.style.top = pos.top + 'px';\n          widget.style.width = pos.width + 'px';\n          widget.style.height = pos.height + 'px';\n        }\n      });\n    } catch (e) {}\n  }\n})();\n"}function r(n){const t=e[n.type];if(!t)return"";const i={...n.properties,id:n.id};let a=o(t.generateHtml(i),n.properties.showHeader);return`\n    <div class="widget-container" data-widget-id="${n.id}" style="position:absolute;left:${n.x}px;top:${n.y}px;width:${n.width}px;height:${n.height}px;">\n      ${a}\n    </div>`}function c(n){const t=e[n.type];if(!t||!t.generateJs)return"";const i={...n.properties,id:n.id};return t.generateJs(i)}function l(e){const{canvas:n,widgets:t}=e,i=t.map(r).join("\n");return`<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>My LobsterBoard Dashboard</title>\n  <link rel="stylesheet" href="css/style.css">\n</head>\n<body>\n  <main class="dashboard" style="width:${n.width}px;height:${n.height}px;position:relative;">\n    ${i}\n  </main>\n  <script src="js/dashboard.js"><\/script>\n</body>\n</html>`}function p(e){return`/**\n * LobsterBoard Dashboard - Generated JavaScript\n * Replace YOUR_*_API_KEY placeholders with your actual API keys\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  console.log('Dashboard loaded');\n});\n\n${e.map(c).filter(Boolean).join("\n\n")}\n\n\n// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n// POST-EXPORT LAYOUT EDITING\n// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n(function() {\n  const STORAGE_KEY = 'lobsterboard-layout';\n  const GRID_SIZE = 20;\n  const MIN_WIDTH = 100;\n  const MIN_HEIGHT = 60;\n  \n  let editMode = false;\n  let activeWidget = null;\n  let startX, startY, origLeft, origTop, origWidth, origHeight;\n  let isResizing = false;\n\n  document.addEventListener('DOMContentLoaded', initEditMode);\n\n  function initEditMode() {\n    const btn = document.createElement('button');\n    btn.id = 'edit-toggle';\n    btn.textContent = '‚úèÔ∏è Edit Layout';\n    btn.onclick = toggleEditMode;\n    document.body.appendChild(btn);\n    document.querySelectorAll('.widget-container').forEach(initWidget);\n    loadPositions();\n  }\n\n  function initWidget(widget) {\n    const handle = document.createElement('div');\n    handle.className = 'resize-handle-edit';\n    widget.appendChild(handle);\n    widget.addEventListener('mousedown', onWidgetMouseDown);\n    handle.addEventListener('mousedown', onResizeMouseDown);\n  }\n\n  function toggleEditMode() {\n    editMode = !editMode;\n    document.body.classList.toggle('edit-mode', editMode);\n    document.getElementById('edit-toggle').classList.toggle('active', editMode);\n    document.getElementById('edit-toggle').textContent = editMode ? 'üíæ Save Layout' : '‚úèÔ∏è Edit Layout';\n    if (!editMode) savePositions();\n  }\n\n  function onWidgetMouseDown(e) {\n    if (!editMode) return;\n    if (e.target.classList.contains('resize-handle-edit')) return;\n    if (e.button !== 0) return;\n    e.preventDefault();\n    activeWidget = e.currentTarget;\n    isResizing = false;\n    startX = e.clientX;\n    startY = e.clientY;\n    origLeft = activeWidget.offsetLeft;\n    origTop = activeWidget.offsetTop;\n    activeWidget.classList.add('dragging');\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  }\n\n  function onResizeMouseDown(e) {\n    if (!editMode) return;\n    e.preventDefault();\n    e.stopPropagation();\n    activeWidget = e.target.parentElement;\n    isResizing = true;\n    startX = e.clientX;\n    startY = e.clientY;\n    origWidth = activeWidget.offsetWidth;\n    origHeight = activeWidget.offsetHeight;\n    activeWidget.classList.add('dragging');\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  }\n\n  function onMouseMove(e) {\n    if (!activeWidget) return;\n    const dx = e.clientX - startX;\n    const dy = e.clientY - startY;\n    if (isResizing) {\n      activeWidget.style.width = Math.max(MIN_WIDTH, origWidth + dx) + 'px';\n      activeWidget.style.height = Math.max(MIN_HEIGHT, origHeight + dy) + 'px';\n    } else {\n      activeWidget.style.left = Math.max(0, origLeft + dx) + 'px';\n      activeWidget.style.top = Math.max(0, origTop + dy) + 'px';\n    }\n  }\n\n  function onMouseUp() {\n    if (!activeWidget) return;\n    if (isResizing) {\n      activeWidget.style.width = snapToGrid(activeWidget.offsetWidth) + 'px';\n      activeWidget.style.height = snapToGrid(activeWidget.offsetHeight) + 'px';\n    } else {\n      activeWidget.style.left = snapToGrid(activeWidget.offsetLeft) + 'px';\n      activeWidget.style.top = snapToGrid(activeWidget.offsetTop) + 'px';\n    }\n    activeWidget.classList.remove('dragging');\n    activeWidget = null;\n    isResizing = false;\n    document.removeEventListener('mousemove', onMouseMove);\n    document.removeEventListener('mouseup', onMouseUp);\n  }\n\n  function snapToGrid(value) {\n    return Math.round(value / GRID_SIZE) * GRID_SIZE;\n  }\n\n  function savePositions() {\n    const positions = {};\n    document.querySelectorAll('.widget-container').forEach(widget => {\n      const id = widget.dataset.widgetId;\n      if (id) {\n        positions[id] = {\n          left: widget.offsetLeft,\n          top: widget.offsetTop,\n          width: widget.offsetWidth,\n          height: widget.offsetHeight\n        };\n      }\n    });\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(positions));\n    } catch (e) {}\n  }\n\n  function loadPositions() {\n    try {\n      const saved = localStorage.getItem(STORAGE_KEY);\n      if (!saved) return;\n      const positions = JSON.parse(saved);\n      document.querySelectorAll('.widget-container').forEach(widget => {\n        const id = widget.dataset.widgetId;\n        const pos = positions[id];\n        if (pos) {\n          widget.style.left = pos.left + 'px';\n          widget.style.top = pos.top + 'px';\n          widget.style.width = pos.width + 'px';\n          widget.style.height = pos.height + 'px';\n        }\n      });\n    } catch (e) {}\n  }\n})();\n\n`}function g(n){const t=[],i=n.some(e=>["openclaw-release","auth-status","activity-list","cron-jobs","system-log","session-count","token-gauge"].includes(e.type));return n.forEach(n=>{const i=e[n.type];i?.hasApiKey&&i.apiKeyName&&(t.includes(i.apiKeyName)||t.push(i.apiKeyName))}),`# LobsterBoard Dashboard\n\nThis dashboard was generated with LobsterBoard Dashboard Builder.\n\n## Quick Start\n\n${i?"### Running with OpenClaw widgets\n\nYour dashboard includes widgets that connect to OpenClaw. Run the included server:\n\n```bash\nnode server.js\n```\n\nOpen http://localhost:8080 in your browser.\n":""}\n### Static mode\n\nOpen \`index.html\` directly in a browser.\n\n## Files\n\n| File | Description |\n|------|-------------|\n| \`index.html\` | Dashboard page |\n| \`css/style.css\` | Styles |\n| \`js/dashboard.js\` | Widget logic |\n| \`server.js\` | Server with OpenClaw API proxy |\n\n${t.length>0?`## API Keys\n\nEdit \`js/dashboard.js\` and replace these placeholders:\n${t.map(e=>`- \`YOUR_${e}\``).join("\n")}\n`:""}\n\n---\n\nGenerated with LobsterBoard - https://github.com/curbob/LobsterBoard\n`}const u="0.1.0";var v={VERSION:u,WIDGETS:e,...{escapeHtml:a,processWidgetHtml:o,generateDashboardCss:d,generateEditJs:s,generateWidgetHtml:r,generateWidgetJs:c,generateDashboardHtml:l,generateDashboardJs:p,generateReadme:g}};export{u as VERSION,e as WIDGETS,v as default,a as escapeHtml,d as generateDashboardCss,l as generateDashboardHtml,p as generateDashboardJs,s as generateEditJs,g as generateReadme,r as generateWidgetHtml,c as generateWidgetJs,t as getWidget,n as getWidgetCategories,i as getWidgetTypes,o as processWidgetHtml};
//# sourceMappingURL=lobsterboard.esm.min.js.map
